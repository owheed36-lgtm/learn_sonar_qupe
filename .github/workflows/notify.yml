name: Notifier

on:
  push:
    branches: [ main ]
  pull_request:


jobs:

  messageSlack:
    runs-on: ubuntu-latest
    steps:
      - name: Notification Slack
        uses: rtCamp/action-slack-notify@v2
        env:
          SLACK_CHANNEL: test_channel
          SLACK_TITLE: PR Open
          SLACK_USERNAME: BotCI
          SLACK_WEBHOOK: ${{ secrets.SLACK_WEBHOOK_URL }}
          SLACK_MESSAGE: |
            *Author:* @${{ github.event_name == 'pull_request' && github.event.pull_request.user.login || github.actor }}
            *Action:* ${{ github.event_name == 'pull_request' && github.event.action || 'pushed' }}
            *Branch:* ${{ github.event_name == 'pull_request' && format('`{0}` â†’ `{1}`', github.event.pull_request.head.ref, github.event.pull_request.base.ref) || format('`{0}`', github.ref_name) }}
            *Reviewers:* ${{ github.event_name == 'pull_request' && join(github.event.pull_request.requested_reviewers.*.login, ', ') || 'owheed36-lgtm' }}
            *Commit:* `${{ steps.sha.outputs.short }}`