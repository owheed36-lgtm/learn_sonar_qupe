name: New Notification

on:
  push:
  pull_request:
jobs:
  messageSlack:
    runs-on: ubuntu-latest
    steps:
      - name: Get short SHA
        id: sha
        run: echo "short=$(git rev-parse --short HEAD)" >> $GITHUB_OUTPUT
      - name: Slack Notification
        uses: rtCamp/action-slack-notify@v2
        env:
          SLACK_CHANNEL: test_channel
          SLACK_USERNAME: CI-Bot ğŸ¤–
          SLACK_ICON_EMOJI: ":rocket:"
          SLACK_TITLE: >
            ${{ github.event_name == 'pull_request' && 'ğŸš€ New Pull Request' || 'ğŸ“¦ New Push to Main' }}
          SLACK_WEBHOOK: ${{ secrets.SLACK_WEBHOOK_URL }}
          SLACK_MESSAGE: |
            *ğŸ‘¤ Author:* `${{ github.event_name == 'pull_request' && github.event.pull_request.user.login || github.actor }}`
            *ğŸ“ Action:* `${{ github.event_name == 'pull_request' && github.event.action || 'push' }}`
            *ğŸ“¦ Repository:* `${{ github.repository }}`
            *ğŸŒ¿ Branch:*
            ${{ github.event_name == 'pull_request'
              && format('`{0}` â†’ `{1}`', github.event.pull_request.head.ref, github.event.pull_request.base.ref)
              || format('`{0}`', github.ref_name) }}
            *ğŸ§¾ Title:*
            ${{ github.event_name == 'pull_request'
              && github.event.pull_request.title
              || 'Direct push to main' }}
            *ğŸ”¢ Commits:*
            ${{ github.event_name == 'pull_request'
              && github.event.pull_request.commits
              || '1+' }}
            *ğŸ”— Link:*
            ${{ github.event_name == 'pull_request'
              && github.event.pull_request.html_url
              || format('https://github.com/{0}/commit/{1}', github.repository, github.sha) }}
